<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                   http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.24.xsd">

    <changeSet id="1.0.0-007-init-role-permission" author="hiepnh" context="default">
        <!-- Insert role -->
        <insert tableName="role">
            <column name="role_name" value="ADMIN"/>
            <column name="description" value="Administrator"/>
        </insert>
        <insert tableName="role">
            <column name="role_name" value="USER"/>
            <column name="description" value="Normal user"/>
        </insert>

        <!-- Insert permission -->
        <insert tableName="permission">
            <column name="permission_name" value="USER.CREATE"/>
            <column name="description" value="Create user"/>
        </insert>
        <insert tableName="permission">
            <column name="permission_name" value="USER.MANAGE"/>
            <column name="description" value="Manage user"/>
        </insert>
        <insert tableName="permission">
            <column name="permission_name" value="USER.SELF_PROFILE"/>
            <column name="description" value="Get Self Profile"/>
        </insert>
        <insert tableName="permission">
            <column name="permission_name" value="CHECKIN.CHECK"/>
            <column name="description" value="Check in"/>
        </insert>
        <insert tableName="permission">
            <column name="permission_name" value="CHECKIN.VIEW_MONTH_STATUS"/>
            <column name="description" value="Get Month check-in status"/>
        </insert>
        <insert tableName="permission">
            <column name="permission_name" value="TRANSACTION.GET_POINT_REWARD_HISTORY"/>
            <column name="description" value="Get self point reward history"/>
        </insert>
        <insert tableName="permission">
            <column name="permission_name" value="TRANSACTION.GET_SELF_TRANSACTIONS"/>
            <column name="description" value="Get Self transactions"/>
        </insert>
        <insert tableName="permission">
            <column name="permission_name" value="PAYMENT.SIMULATE_PAYMENT"/>
            <column name="description" value="Simulate payment to deduct point from user wallet"/>
        </insert>

        <!-- Link role_permission -->
        <insert tableName="role_permission">
            <column name="role_id" value="1"/> <!-- ADMIN -->
            <column name="permission_id" value="1"/> <!-- USER.CREATE -->
        </insert>
        <insert tableName="role_permission">
            <column name="role_id" value="1"/>
            <column name="permission_id" value="2"/> <!-- USER.MANAGE -->
        </insert>
        <insert tableName="role_permission">
            <column name="role_id" value="1"/>
            <column name="permission_id" value="3"/> <!-- USER.SELF_PROFILE -->
        </insert>
        <insert tableName="role_permission">
            <column name="role_id" value="1"/>
            <column name="permission_id" value="4"/> <!-- CHECKIN.CHECK -->
        </insert>
        <insert tableName="role_permission">
            <column name="role_id" value="1"/>
            <column name="permission_id" value="5"/> <!-- CHECKIN.VIEW_MONTH_STATUS -->
        </insert>
        <insert tableName="role_permission">
            <column name="role_id" value="1"/>
            <column name="permission_id" value="6"/> <!-- TRANSACTION.GET_POINT_REWARD_HISTORY -->
        </insert>
        <insert tableName="role_permission">
            <column name="role_id" value="1"/>
            <column name="permission_id" value="7"/> <!-- TRANSACTION.GET_SELF_TRANSACTIONS -->
        </insert>
        <insert tableName="role_permission">
            <column name="role_id" value="1"/>
            <column name="permission_id" value="8"/> <!-- PAYMENT.SIMULATE_PAYMENT-->
        </insert>

        <insert tableName="role_permission">
            <column name="role_id" value="2"/> <!-- USER -->
            <column name="permission_id" value="3"/> <!-- USER.SELF_PROFILE -->
        </insert>
        <insert tableName="role_permission">
            <column name="role_id" value="2"/>
            <column name="permission_id" value="4"/> <!-- CHECKIN.CHECK -->
        </insert>
        <insert tableName="role_permission">
            <column name="role_id" value="2"/>
            <column name="permission_id" value="5"/> <!-- CHECKIN.VIEW_MONTH_STATUS -->
        </insert>
        <insert tableName="role_permission">
            <column name="role_id" value="2"/>
            <column name="permission_id" value="6"/> <!-- TRANSACTION.GET_POINT_REWARD_HISTORY -->
        </insert>
        <insert tableName="role_permission">
            <column name="role_id" value="2"/>
            <column name="permission_id" value="7"/> <!-- TRANSACTION.GET_SELF_TRANSACTIONS -->
        </insert>

        <!-- Insert default admin user -->
        <insert tableName="users">
            <column name="username" value="admin"/>
            <column name="email" value="admin@example.com"/>
            <column name="password" value="$2a$10$exqVcLjjMWgJ800KKbldhODR1FtimaBo1E3RDGabOIcPgx/eI0bkS"/> <!-- bcrypt hash -->
            <column name="avatar_url" value=""/>
        </insert>

        <!-- Link admin user_role -->
        <insert tableName="user_role">
            <column name="user_id" value="1"/>
            <column name="role_id" value="1"/> <!-- ADMIN -->
        </insert>
        <!-- create admin wallet -->
        <insert tableName="wallets">
            <column name="wallet_code" value="LOTUS-1"/>
            <column name="user_id" value="1"/>
            <column name="wallet_type" value="LOTUS"/>
            <column name="balance" value="1000"/>
            <column name="created_at" valueComputed="NOW()"/>
            <column name="updated_at" valueComputed="NOW()"/>
        </insert>
    </changeSet>
</databaseChangeLog>